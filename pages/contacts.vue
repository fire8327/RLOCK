<template>
    <div class="my-10 flex flex-col gap-7 w-full">
        <p class="w-full py-7 px-6 md:px-12 xl:px-[90px] bg-gradient-to-l from-[#48BBDE] to-[#B190F1] rounded-[25px] NeutralFace text-white text-2xl md:text-3xl xl:text-[32px]">контакты</p>
        <div class="flex lg:items-start gap-5 px-6 md:px-12 xl:px-[90px]">
            <div class="flex flex-col gap-11 text-xl md:text-xl xl:text-2xl font-light lg:w-3/5">
                <p class="leading-[165.3%]">Если у вас возник вопрос по бронированию, пожалуйста, свяжитесь с нами по телефону или с помощью формы обратной связи.</p>
                <div class="flex flex-col gap-7">
                    <div class="flex items-center gap-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44" fill="none">
                            <path d="M29.8704 24.1426L29.8715 24.1431L37.9864 27.7744C37.9866 27.7744 37.9868 27.7745 37.9869 27.7746C38.414 27.9603 38.7697 28.2789 39.0011 28.683C39.2326 29.0873 39.3274 29.5555 39.2713 30.018L39.2712 30.019C38.9828 32.206 37.9082 34.2133 36.2481 35.6659C34.5879 37.1185 32.4557 37.9171 30.2498 37.9125M29.8704 24.1426L30.25 37.8125M29.8704 24.1426C29.5405 23.9998 29.1802 23.9415 28.8222 23.973C28.4644 24.0044 28.1201 24.1245 27.8204 24.3223C27.7938 24.3391 27.7685 24.3578 27.7446 24.3782L27.7445 24.3782L23.4883 28.0063C23.4091 28.0532 23.3198 28.0804 23.2278 28.0857C23.1335 28.091 23.0394 28.0731 22.9537 28.0335C20.1828 26.6956 17.3106 23.8453 15.9731 21.1075C15.9326 21.0225 15.9139 20.9288 15.9185 20.8348C15.9229 20.7431 15.9495 20.6539 15.9957 20.5748L19.6342 16.2481L19.6345 16.2477C19.6546 16.2237 19.6722 16.1982 19.687 16.1768L19.688 16.1753L19.688 16.1753L19.6893 16.1735C19.8868 15.874 20.0067 15.53 20.0381 15.1727C20.0696 14.8153 20.0116 14.4557 19.8695 14.1263L19.8695 14.1263L19.8689 14.1249L16.2307 6.02353C16.0464 5.59365 15.7278 5.23507 15.3225 5.00159C14.917 4.76796 14.4466 4.67219 13.982 4.72867L13.981 4.7288C11.794 5.01715 9.78674 6.09176 8.33414 7.75192C6.88156 9.41205 6.08297 11.5442 6.08752 13.7501M29.8704 24.1426L6.18752 13.75M30.2498 37.9125L30.25 37.8125M30.2498 37.9125C30.2499 37.9125 30.25 37.9125 30.25 37.9125V37.8125M30.2498 37.9125C16.926 37.9124 6.08758 27.0739 6.08752 13.7501M30.25 37.8125C16.9813 37.8125 6.18752 27.0187 6.18752 13.75M6.08752 13.7501C6.08752 13.7501 6.08752 13.7501 6.08752 13.7502L6.18752 13.75M6.08752 13.7501C6.08752 13.75 6.08752 13.75 6.08752 13.75H6.18752M30.2504 36.3375H30.25C17.7962 36.3375 7.66252 26.2038 7.66252 13.75L7.66252 13.7496C7.6562 11.9262 8.31423 10.1629 9.51356 8.78934C10.7121 7.41672 12.3692 6.5273 14.1755 6.28708C14.1977 6.28584 14.22 6.2859 14.2423 6.28728L14.2422 6.28743L14.2476 6.28747C14.3635 6.28846 14.4765 6.32371 14.5724 6.38879C14.6684 6.45386 14.7429 6.54586 14.7866 6.65319L14.7866 6.65321L14.788 6.65631L18.4156 14.7569C18.4157 14.7572 18.4158 14.7574 18.4159 14.7577C18.4518 14.8421 18.4675 14.9338 18.4617 15.0253C18.456 15.1145 18.43 15.2011 18.3858 15.2787L14.7494 19.6033L14.7493 19.6032L14.7467 19.6067C14.7437 19.6105 14.7405 19.6147 14.737 19.6192C14.7236 19.6361 14.707 19.6574 14.6924 19.6799C14.489 19.991 14.3692 20.3493 14.3445 20.7202C14.3199 21.0911 14.3913 21.4621 14.5519 21.7974L14.5522 21.7981C16.0557 24.8761 19.1521 27.9499 22.2642 29.4531L22.265 29.4535C22.6025 29.613 22.9756 29.6824 23.3479 29.6549C23.7203 29.6274 24.0791 29.504 24.3896 29.2967L24.3897 29.2969L24.3944 29.2933L24.458 29.2452L24.4581 29.2453L24.4625 29.2416L28.7239 25.6169C28.8001 25.5717 28.8857 25.5447 28.9741 25.538C29.0646 25.5312 29.1554 25.5458 29.2391 25.5808C29.2395 25.5809 29.2399 25.5811 29.2402 25.5812L37.3522 29.2172L37.3522 29.2172L37.3547 29.2182C37.4717 29.2669 37.5699 29.3522 37.6345 29.4613C37.6988 29.57 37.7264 29.6965 37.7132 29.8221C37.4735 31.6293 36.5839 33.2874 35.2107 34.4864C33.8371 35.6858 32.0738 36.3438 30.2504 36.3375Z" fill="url(#paint0_linear_766_1993)" stroke="url(#paint1_linear_766_1993)" stroke-width="0.2"/>
                            <defs>
                                <linearGradient id="paint0_linear_766_1993" x1="7.26692" y1="4.81286" x2="39.6012" y2="6.63468" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#B98CF2"/>
                                    <stop offset="1" stop-color="#48BBDE"/>
                                </linearGradient>
                                <linearGradient id="paint1_linear_766_1993" x1="7.26692" y1="4.81286" x2="39.6012" y2="6.63468" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#B98CF2"/>
                                    <stop offset="1" stop-color="#48BBDE"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <NuxtLink to="tel:+ 7 (999) 234 45 67">+ 7 (999) 234 45 67</NuxtLink>
                    </div>
                    <div class="flex items-center gap-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44" fill="none">
                            <path d="M35.6302 7.45251H8.36849C7.15291 7.45251 5.98713 7.9354 5.12758 8.79494C4.26804 9.65448 3.78516 10.8203 3.78516 12.0358V31.9642C3.78516 33.1798 4.26804 34.3455 5.12758 35.2051C5.98713 36.0646 7.15291 36.5475 8.36849 36.5475H35.6302C36.8457 36.5475 38.0115 36.0646 38.8711 35.2051C39.7306 34.3455 40.2135 33.1798 40.2135 31.9642V12.0358C40.2135 10.8203 39.7306 9.65448 38.8711 8.79494C38.0115 7.9354 36.8457 7.45251 35.6302 7.45251ZM8.36849 9.28585H35.6302C36.3241 9.28385 36.9927 9.5462 37.5002 10.0196C38.0076 10.4929 38.3157 11.1418 38.3618 11.8342C33.8335 14.2542 29.2868 16.6558 24.7402 19.0758C24.125 19.4613 23.4743 19.7867 22.7968 20.0475C22.265 20.1525 21.7169 20.143 21.189 20.0197C20.6611 19.8964 20.1655 19.6622 19.7352 19.3325C17.1318 17.9575 14.5285 16.5642 11.9435 15.1892C9.85349 14.0892 7.72682 12.9708 5.63682 11.8525C5.67934 11.1572 5.98575 10.5043 6.49345 10.0272C7.00115 9.55021 7.67184 9.28502 8.36849 9.28585ZM38.3802 31.9642C38.3802 32.6935 38.0904 33.393 37.5747 33.9087C37.059 34.4244 36.3595 34.7142 35.6302 34.7142H8.36849C7.63914 34.7142 6.93967 34.4244 6.42395 33.9087C5.90822 33.393 5.61849 32.6935 5.61849 31.9642V13.9333C9.94516 16.2067 14.2535 18.5167 18.5802 20.8083C19.3532 21.2823 20.1854 21.6521 21.0552 21.9083C22.3282 22.1153 23.6329 21.8479 24.7218 21.1567C27.3802 19.7633 30.0202 18.3517 32.6785 16.9583C34.5852 15.9317 36.4735 14.9417 38.3802 13.9333V31.9642Z" fill="url(#paint0_linear_766_1995)"/>
                            <defs>
                                <linearGradient id="paint0_linear_766_1995" x1="4.97674" y1="7.45251" x2="40.6066" y2="9.96601" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#B98CF2"/>
                                    <stop offset="1" stop-color="#48BBDE"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <NuxtLink to="mailto:info@rlock.ru">info@rlock.ru</NuxtLink>
                    </div>
                    <div class="flex items-center gap-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44" fill="none">
                            <path d="M7.33398 18.5955C7.33398 10.351 13.901 3.66669 22.0007 3.66669C30.1003 3.66669 36.6673 10.351 36.6673 18.5955C36.6673 26.7759 31.9868 36.3239 24.6828 39.7357C23.8433 40.1288 22.9276 40.3325 22.0007 40.3325C21.0737 40.3325 20.158 40.1288 19.3185 39.7357C12.0145 36.322 7.33398 26.7759 7.33398 18.5974V18.5955Z" stroke="url(#paint0_linear_766_2021)" stroke-width="2"/>
                            <path d="M22 23.8334C25.0376 23.8334 27.5 21.3709 27.5 18.3334C27.5 15.2958 25.0376 12.8334 22 12.8334C18.9624 12.8334 16.5 15.2958 16.5 18.3334C16.5 21.3709 18.9624 23.8334 22 23.8334Z" stroke="url(#paint1_linear_766_2021)" stroke-width="2"/>
                            <defs>
                                <linearGradient id="paint0_linear_766_2021" x1="8.29349" y1="3.66668" x2="37.0682" y2="4.96373" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#B98CF2"/>
                                    <stop offset="1" stop-color="#48BBDE"/>
                                </linearGradient>
                                    <linearGradient id="paint1_linear_766_2021" x1="16.8598" y1="12.8334" x2="27.638" y2="13.4407" gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#B98CF2"/>
                                    <stop offset="1" stop-color="#48BBDE"/>
                                </linearGradient>
                            </defs>
                        </svg>
                        <p class="leading-[135.3%]">121596, г. Москва, муниципальный округ Можайский вн.тер.г., ул. Горбунова, д. 2, стр. 3, помещение 55/3</p>
                    </div>
                </div>
            </div>
            <div class="bg-gradient-to-br from-[#48BBDE] to-[#B190F1] rounded-[25px] p-[2px] lg:w-2/5">
                <div class="w-full h-full bg-white p-5 pb-6 flex flex-col gap-5 rounded-[25px]">
                    <div class="flex flex-col">
                        <p class="font-bold text-lg md:text-xl xl:text-2xl">Есть вопрос?</p>
                        <p class="font-light text-base md:text-lg xl:text-xl leading-[165.3%]">Заполните форму обратной связи и мы свяжемся с вами через 30 минут.</p>
                    </div>
                    <form @submit.prevent="submitForm" id="feedbackForm" class="flex flex-col gap-4 w-full">
                        <input required v-model="form.name" type="text" class="rounded-[10px] bg-[#EBEBEB] border border-[#B1B1B1] text-base py-2.5 px-5 placeholder-[#696969] focus:ring-0 focus:outline-none focus:appearance-none" placeholder="Ваше имя">
                        <input required v-model="form.email" type="email" class="rounded-[10px] bg-[#EBEBEB] border border-[#B1B1B1] text-base py-2.5 px-5 placeholder-[#696969] focus:ring-0 focus:outline-none focus:appearance-none" placeholder="Email">
                        <textarea v-model="form.msg" class="rounded-[10px] bg-[#EBEBEB] border border-[#B1B1B1] text-base py-2.5 px-5 placeholder-[#696969] focus:ring-0 focus:outline-none focus:appearance-none resize-none h-24" placeholder="Текст вопроса"></textarea>
                        <button class="text-white font-normal bg-gradient-to-r from-[#48BBDE] to-[#B190F1] rounded-[10px] text-center text-xl md:text-xl xl:text-2xl py-3 w-full">Отправить</button>
                        <button type="button" @click="message.title = null" class="fixed top-10 right-10 z-[41] cursor-pointer flex items-center gap-4 px-6 py-2 rounded-2xl w-fit text-[#131313] bg-white dark:text-white dark:bg-[#131313]" :class="message.type ? 'shadow-[0_0_20px_-7px]' : 'bg-red-500'" v-if="message.title">
                            <span>{{message.title}}</span>
                            <Icon name="material-symbols:close-rounded" class="text-xl"/>
                        </button>
                    </form>
                </div>
            </div>
        </div>
        <ClientOnly>
            <div class="px-6 md:px-12 xl:px-[90px]">
                <div class="rounded-[15px] p-px bg-gradient-to-tl from-[#48BBDE] to-[#B190F1]">
                    <div class="w-full h-full bg-white rounded-[15px] overflow-hidden">
                        <YandexMap :coordinates="[55.726407, 37.399455]" :zoom="17">
                            <YandexMarker :coordinates="[55.726407, 37.399455]" :marker-id="12345">
                                <template #component>
                                    <div class="flex flex-col h-fit gap-2">
                                        <p class="font-medium text-lg">Офис</p>
                                        <p>г. Москва, муниципальный округ Можайский вн.тер.г., ул. Горбунова, д. 2, стр. 3, помещение 55/3</p>
                                    </div>
                                </template>
                            </YandexMarker>
                        </YandexMap>
                    </div>
                </div>
            </div>
        </ClientOnly>
    </div>
</template>

<script setup>
    import { yandexMap, yandexMarker } from 'vue-yandex-maps'

    const form = ref({
        name: "",
        email: "",
        msg: ""
    })

    const token = "6478570357:AAHRiEm9vOmK0oVMzoVAbxMGxIZl1NK86oc"
    const chat_id = "-4029823062"
    const URL = `https://api.telegram.org/bot${token}/sendMessage`

    let message = ref({title:null, type:true})

    const submitForm = async () => {
        let msg = "<b>Сообщение с сайта!</b>\n"
        + `<b>Имя:</b> ${form.value.name}\n`
        + `<b>Email:</b> ${form.value.email}\n`
        + `<b>Вопрос:</b> ${form.value.msg}\n` 
        const {data, error} = await useFetch(URL,{
            body:{
                'chat_id': chat_id,
                'parse_mode': 'html',
                'text': msg
            },
            method:'post'        
	    })
        if (error.value) return message.value.title = 'При отправке произошла ошибка!', message.value.type = false
	    message.value.title = 'Успешная отправка!', message.value.type = true 
        form.value.name = ""
        form.value.email = ""
        form.value.msg = ""
        setTimeout(() => {
            message.value.title = null
        }, 3000);
    }
</script>

<style>
    .yandex-container {
        height: 400px;
    }
    .yandex-balloon {
        height: 100px;
        width: 275px;
    }
</style>